{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-c5af580bee8533ac.js","node_modules/@msgpack/msgpack/src/utils/prettyByte.ts","node_modules/@msgpack/msgpack/src/ExtData.ts","node_modules/@msgpack/msgpack/src/DecodeError.ts","node_modules/@msgpack/msgpack/src/utils/int.ts","node_modules/@msgpack/msgpack/src/timestamp.ts","node_modules/process/browser.js","node_modules/@msgpack/msgpack/src/ExtensionCodec.ts","node_modules/@msgpack/msgpack/src/utils/utf8.ts","node_modules/@msgpack/msgpack/src/utils/typedArrays.ts","node_modules/@msgpack/msgpack/src/CachedKeyDecoder.ts","node_modules/@msgpack/msgpack/src/Decoder.ts","node_modules/@msgpack/msgpack/src/utils/stream.ts","node_modules/@msgpack/msgpack/src/decode.ts","node_modules/@msgpack/msgpack/src/decodeAsync.ts","src/js/appUtil.ts","src/js/Icons.ts","src/js/Strava.ts","node_modules/@parcel/runtime-js/lib/runtime-d6d0c1c70fcc4142.js","src/webpages/activities-page/activities-page.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"8iTKF\\\":\\\"activities-page.b165af2e.js\\\",\\\"liIPv\\\":\\\"strava_button.d874814d.png\\\"}\"));","export function prettyByte(byte: number): string {\n  return `${byte < 0 ? \"-\" : \"\"}0x${Math.abs(byte).toString(16).padStart(2, \"0\")}`;\n}\n","/**\n * ExtData is used to handle Extension Types that are not registered to ExtensionCodec.\n */\nexport class ExtData {\n  constructor(readonly type: number, readonly data: Uint8Array) {}\n}\n","export class DecodeError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    // fix the prototype chain in a cross-platform way\n    const proto: typeof DecodeError.prototype = Object.create(DecodeError.prototype);\n    Object.setPrototypeOf(this, proto);\n\n    Object.defineProperty(this, \"name\", {\n      configurable: true,\n      enumerable: false,\n      value: DecodeError.name,\n    });\n  }\n}\n","// Integer Utility\n\nexport const UINT32_MAX = 0xffff_ffff;\n\n// DataView extension to handle int64 / uint64,\n// where the actual range is 53-bits integer (a.k.a. safe integer)\n\nexport function setUint64(view: DataView, offset: number, value: number): void {\n  const high = value / 0x1_0000_0000;\n  const low = value; // high bits are truncated by DataView\n  view.setUint32(offset, high);\n  view.setUint32(offset + 4, low);\n}\n\nexport function setInt64(view: DataView, offset: number, value: number): void {\n  const high = Math.floor(value / 0x1_0000_0000);\n  const low = value; // high bits are truncated by DataView\n  view.setUint32(offset, high);\n  view.setUint32(offset + 4, low);\n}\n\nexport function getInt64(view: DataView, offset: number): number {\n  const high = view.getInt32(offset);\n  const low = view.getUint32(offset + 4);\n  return high * 0x1_0000_0000 + low;\n}\n\nexport function getUint64(view: DataView, offset: number): number {\n  const high = view.getUint32(offset);\n  const low = view.getUint32(offset + 4);\n  return high * 0x1_0000_0000 + low;\n}\n","// https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type\nimport { DecodeError } from \"./DecodeError\";\nimport { getInt64, setInt64 } from \"./utils/int\";\n\nexport const EXT_TIMESTAMP = -1;\n\nexport type TimeSpec = {\n  sec: number;\n  nsec: number;\n};\n\nconst TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\nconst TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\n\nexport function encodeTimeSpecToTimestamp({ sec, nsec }: TimeSpec): Uint8Array {\n  if (sec >= 0 && nsec >= 0 && sec <= TIMESTAMP64_MAX_SEC) {\n    // Here sec >= 0 && nsec >= 0\n    if (nsec === 0 && sec <= TIMESTAMP32_MAX_SEC) {\n      // timestamp 32 = { sec32 (unsigned) }\n      const rv = new Uint8Array(4);\n      const view = new DataView(rv.buffer);\n      view.setUint32(0, sec);\n      return rv;\n    } else {\n      // timestamp 64 = { nsec30 (unsigned), sec34 (unsigned) }\n      const secHigh = sec / 0x100000000;\n      const secLow = sec & 0xffffffff;\n      const rv = new Uint8Array(8);\n      const view = new DataView(rv.buffer);\n      // nsec30 | secHigh2\n      view.setUint32(0, (nsec << 2) | (secHigh & 0x3));\n      // secLow32\n      view.setUint32(4, secLow);\n      return rv;\n    }\n  } else {\n    // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n    const rv = new Uint8Array(12);\n    const view = new DataView(rv.buffer);\n    view.setUint32(0, nsec);\n    setInt64(view, 4, sec);\n    return rv;\n  }\n}\n\nexport function encodeDateToTimeSpec(date: Date): TimeSpec {\n  const msec = date.getTime();\n  const sec = Math.floor(msec / 1e3);\n  const nsec = (msec - sec * 1e3) * 1e6;\n\n  // Normalizes { sec, nsec } to ensure nsec is unsigned.\n  const nsecInSec = Math.floor(nsec / 1e9);\n  return {\n    sec: sec + nsecInSec,\n    nsec: nsec - nsecInSec * 1e9,\n  };\n}\n\nexport function encodeTimestampExtension(object: unknown): Uint8Array | null {\n  if (object instanceof Date) {\n    const timeSpec = encodeDateToTimeSpec(object);\n    return encodeTimeSpecToTimestamp(timeSpec);\n  } else {\n    return null;\n  }\n}\n\nexport function decodeTimestampToTimeSpec(data: Uint8Array): TimeSpec {\n  const view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n\n  // data may be 32, 64, or 96 bits\n  switch (data.byteLength) {\n    case 4: {\n      // timestamp 32 = { sec32 }\n      const sec = view.getUint32(0);\n      const nsec = 0;\n      return { sec, nsec };\n    }\n    case 8: {\n      // timestamp 64 = { nsec30, sec34 }\n      const nsec30AndSecHigh2 = view.getUint32(0);\n      const secLow32 = view.getUint32(4);\n      const sec = (nsec30AndSecHigh2 & 0x3) * 0x100000000 + secLow32;\n      const nsec = nsec30AndSecHigh2 >>> 2;\n      return { sec, nsec };\n    }\n    case 12: {\n      // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n\n      const sec = getInt64(view, 4);\n      const nsec = view.getUint32(0);\n      return { sec, nsec };\n    }\n    default:\n      throw new DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${data.length}`);\n  }\n}\n\nexport function decodeTimestampExtension(data: Uint8Array): Date {\n  const timeSpec = decodeTimestampToTimeSpec(data);\n  return new Date(timeSpec.sec * 1e3 + timeSpec.nsec / 1e6);\n}\n\nexport const timestampExtension = {\n  type: EXT_TIMESTAMP,\n  encode: encodeTimestampExtension,\n  decode: decodeTimestampExtension,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// ExtensionCodec to handle MessagePack extensions\n\nimport { ExtData } from \"./ExtData\";\nimport { timestampExtension } from \"./timestamp\";\n\nexport type ExtensionDecoderType<ContextType> = (\n  data: Uint8Array,\n  extensionType: number,\n  context: ContextType,\n) => unknown;\n\nexport type ExtensionEncoderType<ContextType> = (input: unknown, context: ContextType) => Uint8Array | null;\n\n// immutable interfce to ExtensionCodec\nexport type ExtensionCodecType<ContextType> = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  __brand?: ContextType;\n  tryToEncode(object: unknown, context: ContextType): ExtData | null;\n  decode(data: Uint8Array, extType: number, context: ContextType): unknown;\n};\n\nexport class ExtensionCodec<ContextType = undefined> implements ExtensionCodecType<ContextType> {\n  public static readonly defaultCodec: ExtensionCodecType<undefined> = new ExtensionCodec();\n\n  // ensures ExtensionCodecType<X> matches ExtensionCodec<X>\n  // this will make type errors a lot more clear\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  __brand?: ContextType;\n\n  // built-in extensions\n  private readonly builtInEncoders: Array<ExtensionEncoderType<ContextType> | undefined | null> = [];\n  private readonly builtInDecoders: Array<ExtensionDecoderType<ContextType> | undefined | null> = [];\n\n  // custom extensions\n  private readonly encoders: Array<ExtensionEncoderType<ContextType> | undefined | null> = [];\n  private readonly decoders: Array<ExtensionDecoderType<ContextType> | undefined | null> = [];\n\n  public constructor() {\n    this.register(timestampExtension);\n  }\n\n  public register({\n    type,\n    encode,\n    decode,\n  }: {\n    type: number;\n    encode: ExtensionEncoderType<ContextType>;\n    decode: ExtensionDecoderType<ContextType>;\n  }): void {\n    if (type >= 0) {\n      // custom extensions\n      this.encoders[type] = encode;\n      this.decoders[type] = decode;\n    } else {\n      // built-in extensions\n      const index = 1 + type;\n      this.builtInEncoders[index] = encode;\n      this.builtInDecoders[index] = decode;\n    }\n  }\n\n  public tryToEncode(object: unknown, context: ContextType): ExtData | null {\n    // built-in extensions\n    for (let i = 0; i < this.builtInEncoders.length; i++) {\n      const encodeExt = this.builtInEncoders[i];\n      if (encodeExt != null) {\n        const data = encodeExt(object, context);\n        if (data != null) {\n          const type = -1 - i;\n          return new ExtData(type, data);\n        }\n      }\n    }\n\n    // custom extensions\n    for (let i = 0; i < this.encoders.length; i++) {\n      const encodeExt = this.encoders[i];\n      if (encodeExt != null) {\n        const data = encodeExt(object, context);\n        if (data != null) {\n          const type = i;\n          return new ExtData(type, data);\n        }\n      }\n    }\n\n    if (object instanceof ExtData) {\n      // to keep ExtData as is\n      return object;\n    }\n    return null;\n  }\n\n  public decode(data: Uint8Array, type: number, context: ContextType): unknown {\n    const decodeExt = type < 0 ? this.builtInDecoders[-1 - type] : this.decoders[type];\n    if (decodeExt) {\n      return decodeExt(data, type, context);\n    } else {\n      // decode() does not fail, returns ExtData instead.\n      return new ExtData(type, data);\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unnecessary-condition */\nimport { UINT32_MAX } from \"./int\";\n\nconst TEXT_ENCODING_AVAILABLE =\n  (typeof process === \"undefined\" || process?.env?.[\"TEXT_ENCODING\"] !== \"never\") &&\n  typeof TextEncoder !== \"undefined\" &&\n  typeof TextDecoder !== \"undefined\";\n\nexport function utf8Count(str: string): number {\n  const strLength = str.length;\n\n  let byteLength = 0;\n  let pos = 0;\n  while (pos < strLength) {\n    let value = str.charCodeAt(pos++);\n\n    if ((value & 0xffffff80) === 0) {\n      // 1-byte\n      byteLength++;\n      continue;\n    } else if ((value & 0xfffff800) === 0) {\n      // 2-bytes\n      byteLength += 2;\n    } else {\n      // handle surrogate pair\n      if (value >= 0xd800 && value <= 0xdbff) {\n        // high surrogate\n        if (pos < strLength) {\n          const extra = str.charCodeAt(pos);\n          if ((extra & 0xfc00) === 0xdc00) {\n            ++pos;\n            value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n          }\n        }\n      }\n\n      if ((value & 0xffff0000) === 0) {\n        // 3-byte\n        byteLength += 3;\n      } else {\n        // 4-byte\n        byteLength += 4;\n      }\n    }\n  }\n  return byteLength;\n}\n\nexport function utf8EncodeJs(str: string, output: Uint8Array, outputOffset: number): void {\n  const strLength = str.length;\n  let offset = outputOffset;\n  let pos = 0;\n  while (pos < strLength) {\n    let value = str.charCodeAt(pos++);\n\n    if ((value & 0xffffff80) === 0) {\n      // 1-byte\n      output[offset++] = value;\n      continue;\n    } else if ((value & 0xfffff800) === 0) {\n      // 2-bytes\n      output[offset++] = ((value >> 6) & 0x1f) | 0xc0;\n    } else {\n      // handle surrogate pair\n      if (value >= 0xd800 && value <= 0xdbff) {\n        // high surrogate\n        if (pos < strLength) {\n          const extra = str.charCodeAt(pos);\n          if ((extra & 0xfc00) === 0xdc00) {\n            ++pos;\n            value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n          }\n        }\n      }\n\n      if ((value & 0xffff0000) === 0) {\n        // 3-byte\n        output[offset++] = ((value >> 12) & 0x0f) | 0xe0;\n        output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n      } else {\n        // 4-byte\n        output[offset++] = ((value >> 18) & 0x07) | 0xf0;\n        output[offset++] = ((value >> 12) & 0x3f) | 0x80;\n        output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n      }\n    }\n\n    output[offset++] = (value & 0x3f) | 0x80;\n  }\n}\n\nconst sharedTextEncoder = TEXT_ENCODING_AVAILABLE ? new TextEncoder() : undefined;\nexport const TEXT_ENCODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n  ? UINT32_MAX\n  : typeof process !== \"undefined\" && process?.env?.[\"TEXT_ENCODING\"] !== \"force\"\n  ? 200\n  : 0;\n\nfunction utf8EncodeTEencode(str: string, output: Uint8Array, outputOffset: number): void {\n  output.set(sharedTextEncoder!.encode(str), outputOffset);\n}\n\nfunction utf8EncodeTEencodeInto(str: string, output: Uint8Array, outputOffset: number): void {\n  sharedTextEncoder!.encodeInto(str, output.subarray(outputOffset));\n}\n\nexport const utf8EncodeTE = sharedTextEncoder?.encodeInto ? utf8EncodeTEencodeInto : utf8EncodeTEencode;\n\nconst CHUNK_SIZE = 0x1_000;\n\nexport function utf8DecodeJs(bytes: Uint8Array, inputOffset: number, byteLength: number): string {\n  let offset = inputOffset;\n  const end = offset + byteLength;\n\n  const units: Array<number> = [];\n  let result = \"\";\n  while (offset < end) {\n    const byte1 = bytes[offset++]!;\n    if ((byte1 & 0x80) === 0) {\n      // 1 byte\n      units.push(byte1);\n    } else if ((byte1 & 0xe0) === 0xc0) {\n      // 2 bytes\n      const byte2 = bytes[offset++]! & 0x3f;\n      units.push(((byte1 & 0x1f) << 6) | byte2);\n    } else if ((byte1 & 0xf0) === 0xe0) {\n      // 3 bytes\n      const byte2 = bytes[offset++]! & 0x3f;\n      const byte3 = bytes[offset++]! & 0x3f;\n      units.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n    } else if ((byte1 & 0xf8) === 0xf0) {\n      // 4 bytes\n      const byte2 = bytes[offset++]! & 0x3f;\n      const byte3 = bytes[offset++]! & 0x3f;\n      const byte4 = bytes[offset++]! & 0x3f;\n      let unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n      if (unit > 0xffff) {\n        unit -= 0x10000;\n        units.push(((unit >>> 10) & 0x3ff) | 0xd800);\n        unit = 0xdc00 | (unit & 0x3ff);\n      }\n      units.push(unit);\n    } else {\n      units.push(byte1);\n    }\n\n    if (units.length >= CHUNK_SIZE) {\n      result += String.fromCharCode(...units);\n      units.length = 0;\n    }\n  }\n\n  if (units.length > 0) {\n    result += String.fromCharCode(...units);\n  }\n\n  return result;\n}\n\nconst sharedTextDecoder = TEXT_ENCODING_AVAILABLE ? new TextDecoder() : null;\nexport const TEXT_DECODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n  ? UINT32_MAX\n  : typeof process !== \"undefined\" && process?.env?.[\"TEXT_DECODER\"] !== \"force\"\n  ? 200\n  : 0;\n\nexport function utf8DecodeTD(bytes: Uint8Array, inputOffset: number, byteLength: number): string {\n  const stringBytes = bytes.subarray(inputOffset, inputOffset + byteLength);\n  return sharedTextDecoder!.decode(stringBytes);\n}\n","export function ensureUint8Array(buffer: ArrayLike<number> | Uint8Array | ArrayBufferView | ArrayBuffer): Uint8Array {\n  if (buffer instanceof Uint8Array) {\n    return buffer;\n  } else if (ArrayBuffer.isView(buffer)) {\n    return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n  } else if (buffer instanceof ArrayBuffer) {\n    return new Uint8Array(buffer);\n  } else {\n    // ArrayLike<number>\n    return Uint8Array.from(buffer);\n  }\n}\n\nexport function createDataView(buffer: ArrayLike<number> | ArrayBufferView | ArrayBuffer): DataView {\n  if (buffer instanceof ArrayBuffer) {\n    return new DataView(buffer);\n  }\n\n  const bufferView = ensureUint8Array(buffer);\n  return new DataView(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength);\n}\n","import { utf8DecodeJs } from \"./utils/utf8\";\n\nconst DEFAULT_MAX_KEY_LENGTH = 16;\nconst DEFAULT_MAX_LENGTH_PER_KEY = 16;\n\nexport interface KeyDecoder {\n  canBeCached(byteLength: number): boolean;\n  decode(bytes: Uint8Array, inputOffset: number, byteLength: number): string;\n}\ninterface KeyCacheRecord {\n  readonly bytes: Uint8Array;\n  readonly str: string;\n}\n\nexport class CachedKeyDecoder implements KeyDecoder {\n  hit = 0;\n  miss = 0;\n  private readonly caches: Array<Array<KeyCacheRecord>>;\n\n  constructor(readonly maxKeyLength = DEFAULT_MAX_KEY_LENGTH, readonly maxLengthPerKey = DEFAULT_MAX_LENGTH_PER_KEY) {\n    // avoid `new Array(N)`, which makes a sparse array,\n    // because a sparse array is typically slower than a non-sparse array.\n    this.caches = [];\n    for (let i = 0; i < this.maxKeyLength; i++) {\n      this.caches.push([]);\n    }\n  }\n\n  public canBeCached(byteLength: number): boolean {\n    return byteLength > 0 && byteLength <= this.maxKeyLength;\n  }\n\n  private find(bytes: Uint8Array, inputOffset: number, byteLength: number): string | null {\n    const records = this.caches[byteLength - 1]!;\n\n    FIND_CHUNK: for (const record of records) {\n      const recordBytes = record.bytes;\n\n      for (let j = 0; j < byteLength; j++) {\n        if (recordBytes[j] !== bytes[inputOffset + j]) {\n          continue FIND_CHUNK;\n        }\n      }\n      return record.str;\n    }\n    return null;\n  }\n\n  private store(bytes: Uint8Array, value: string) {\n    const records = this.caches[bytes.length - 1]!;\n    const record: KeyCacheRecord = { bytes, str: value };\n\n    if (records.length >= this.maxLengthPerKey) {\n      // `records` are full!\n      // Set `record` to an arbitrary position.\n      records[(Math.random() * records.length) | 0] = record;\n    } else {\n      records.push(record);\n    }\n  }\n\n  public decode(bytes: Uint8Array, inputOffset: number, byteLength: number): string {\n    const cachedValue = this.find(bytes, inputOffset, byteLength);\n    if (cachedValue != null) {\n      this.hit++;\n      return cachedValue;\n    }\n    this.miss++;\n\n    const str = utf8DecodeJs(bytes, inputOffset, byteLength);\n    // Ensure to copy a slice of bytes because the byte may be NodeJS Buffer and Buffer#slice() returns a reference to its internal ArrayBuffer.\n    const slicedCopyOfBytes = Uint8Array.prototype.slice.call(bytes, inputOffset, inputOffset + byteLength);\n    this.store(slicedCopyOfBytes, str);\n    return str;\n  }\n}\n","import { prettyByte } from \"./utils/prettyByte\";\nimport { ExtensionCodec, ExtensionCodecType } from \"./ExtensionCodec\";\nimport { getInt64, getUint64, UINT32_MAX } from \"./utils/int\";\nimport { utf8DecodeJs, TEXT_DECODER_THRESHOLD, utf8DecodeTD } from \"./utils/utf8\";\nimport { createDataView, ensureUint8Array } from \"./utils/typedArrays\";\nimport { CachedKeyDecoder, KeyDecoder } from \"./CachedKeyDecoder\";\nimport { DecodeError } from \"./DecodeError\";\n\nconst enum State {\n  ARRAY,\n  MAP_KEY,\n  MAP_VALUE,\n}\n\ntype MapKeyType = string | number;\n\nconst isValidMapKeyType = (key: unknown): key is MapKeyType => {\n  const keyType = typeof key;\n\n  return keyType === \"string\" || keyType === \"number\";\n};\n\ntype StackMapState = {\n  type: State.MAP_KEY | State.MAP_VALUE;\n  size: number;\n  key: MapKeyType | null;\n  readCount: number;\n  map: Record<string, unknown>;\n};\n\ntype StackArrayState = {\n  type: State.ARRAY;\n  size: number;\n  array: Array<unknown>;\n  position: number;\n};\n\ntype StackState = StackArrayState | StackMapState;\n\nconst HEAD_BYTE_REQUIRED = -1;\n\nconst EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nconst EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\n\n// IE11: Hack to support IE11.\n// IE11: Drop this hack and just use RangeError when IE11 is obsolete.\nexport const DataViewIndexOutOfBoundsError: typeof Error = (() => {\n  try {\n    // IE11: The spec says it should throw RangeError,\n    // IE11: but in IE11 it throws TypeError.\n    EMPTY_VIEW.getInt8(0);\n  } catch (e: any) {\n    return e.constructor;\n  }\n  throw new Error(\"never reached\");\n})();\n\nconst MORE_DATA = new DataViewIndexOutOfBoundsError(\"Insufficient data\");\n\nconst sharedCachedKeyDecoder = new CachedKeyDecoder();\n\nexport class Decoder<ContextType = undefined> {\n  private totalPos = 0;\n  private pos = 0;\n\n  private view = EMPTY_VIEW;\n  private bytes = EMPTY_BYTES;\n  private headByte = HEAD_BYTE_REQUIRED;\n  private readonly stack: Array<StackState> = [];\n\n  public constructor(\n    private readonly extensionCodec: ExtensionCodecType<ContextType> = ExtensionCodec.defaultCodec as any,\n    private readonly context: ContextType = undefined as any,\n    private readonly maxStrLength = UINT32_MAX,\n    private readonly maxBinLength = UINT32_MAX,\n    private readonly maxArrayLength = UINT32_MAX,\n    private readonly maxMapLength = UINT32_MAX,\n    private readonly maxExtLength = UINT32_MAX,\n    private readonly keyDecoder: KeyDecoder | null = sharedCachedKeyDecoder,\n  ) {}\n\n  private reinitializeState() {\n    this.totalPos = 0;\n    this.headByte = HEAD_BYTE_REQUIRED;\n    this.stack.length = 0;\n\n    // view, bytes, and pos will be re-initialized in setBuffer()\n  }\n\n  private setBuffer(buffer: ArrayLike<number> | BufferSource): void {\n    this.bytes = ensureUint8Array(buffer);\n    this.view = createDataView(this.bytes);\n    this.pos = 0;\n  }\n\n  private appendBuffer(buffer: ArrayLike<number> | BufferSource) {\n    if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n      this.setBuffer(buffer);\n    } else {\n      const remainingData = this.bytes.subarray(this.pos);\n      const newData = ensureUint8Array(buffer);\n\n      // concat remainingData + newData\n      const newBuffer = new Uint8Array(remainingData.length + newData.length);\n      newBuffer.set(remainingData);\n      newBuffer.set(newData, remainingData.length);\n      this.setBuffer(newBuffer);\n    }\n  }\n\n  private hasRemaining(size: number) {\n    return this.view.byteLength - this.pos >= size;\n  }\n\n  private createExtraByteError(posToShow: number): Error {\n    const { view, pos } = this;\n    return new RangeError(`Extra ${view.byteLength - pos} of ${view.byteLength} byte(s) found at buffer[${posToShow}]`);\n  }\n\n  /**\n   * @throws {DecodeError}\n   * @throws {RangeError}\n   */\n  public decode(buffer: ArrayLike<number> | BufferSource): unknown {\n    this.reinitializeState();\n    this.setBuffer(buffer);\n\n    const object = this.doDecodeSync();\n    if (this.hasRemaining(1)) {\n      throw this.createExtraByteError(this.pos);\n    }\n    return object;\n  }\n\n  public *decodeMulti(buffer: ArrayLike<number> | BufferSource): Generator<unknown, void, unknown> {\n    this.reinitializeState();\n    this.setBuffer(buffer);\n\n    while (this.hasRemaining(1)) {\n      yield this.doDecodeSync();\n    }\n  }\n\n  public async decodeAsync(stream: AsyncIterable<ArrayLike<number> | BufferSource>): Promise<unknown> {\n    let decoded = false;\n    let object: unknown;\n    for await (const buffer of stream) {\n      if (decoded) {\n        throw this.createExtraByteError(this.totalPos);\n      }\n\n      this.appendBuffer(buffer);\n\n      try {\n        object = this.doDecodeSync();\n        decoded = true;\n      } catch (e) {\n        if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n          throw e; // rethrow\n        }\n        // fallthrough\n      }\n      this.totalPos += this.pos;\n    }\n\n    if (decoded) {\n      if (this.hasRemaining(1)) {\n        throw this.createExtraByteError(this.totalPos);\n      }\n      return object;\n    }\n\n    const { headByte, pos, totalPos } = this;\n    throw new RangeError(\n      `Insufficient data in parsing ${prettyByte(headByte)} at ${totalPos} (${pos} in the current buffer)`,\n    );\n  }\n\n  public decodeArrayStream(\n    stream: AsyncIterable<ArrayLike<number> | BufferSource>,\n  ): AsyncGenerator<unknown, void, unknown> {\n    return this.decodeMultiAsync(stream, true);\n  }\n\n  public decodeStream(stream: AsyncIterable<ArrayLike<number> | BufferSource>): AsyncGenerator<unknown, void, unknown> {\n    return this.decodeMultiAsync(stream, false);\n  }\n\n  private async *decodeMultiAsync(stream: AsyncIterable<ArrayLike<number> | BufferSource>, isArray: boolean) {\n    let isArrayHeaderRequired = isArray;\n    let arrayItemsLeft = -1;\n\n    for await (const buffer of stream) {\n      if (isArray && arrayItemsLeft === 0) {\n        throw this.createExtraByteError(this.totalPos);\n      }\n\n      this.appendBuffer(buffer);\n\n      if (isArrayHeaderRequired) {\n        arrayItemsLeft = this.readArraySize();\n        isArrayHeaderRequired = false;\n        this.complete();\n      }\n\n      try {\n        while (true) {\n          yield this.doDecodeSync();\n          if (--arrayItemsLeft === 0) {\n            break;\n          }\n        }\n      } catch (e) {\n        if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n          throw e; // rethrow\n        }\n        // fallthrough\n      }\n      this.totalPos += this.pos;\n    }\n  }\n\n  private doDecodeSync(): unknown {\n    DECODE: while (true) {\n      const headByte = this.readHeadByte();\n      let object: unknown;\n\n      if (headByte >= 0xe0) {\n        // negative fixint (111x xxxx) 0xe0 - 0xff\n        object = headByte - 0x100;\n      } else if (headByte < 0xc0) {\n        if (headByte < 0x80) {\n          // positive fixint (0xxx xxxx) 0x00 - 0x7f\n          object = headByte;\n        } else if (headByte < 0x90) {\n          // fixmap (1000 xxxx) 0x80 - 0x8f\n          const size = headByte - 0x80;\n          if (size !== 0) {\n            this.pushMapState(size);\n            this.complete();\n            continue DECODE;\n          } else {\n            object = {};\n          }\n        } else if (headByte < 0xa0) {\n          // fixarray (1001 xxxx) 0x90 - 0x9f\n          const size = headByte - 0x90;\n          if (size !== 0) {\n            this.pushArrayState(size);\n            this.complete();\n            continue DECODE;\n          } else {\n            object = [];\n          }\n        } else {\n          // fixstr (101x xxxx) 0xa0 - 0xbf\n          const byteLength = headByte - 0xa0;\n          object = this.decodeUtf8String(byteLength, 0);\n        }\n      } else if (headByte === 0xc0) {\n        // nil\n        object = null;\n      } else if (headByte === 0xc2) {\n        // false\n        object = false;\n      } else if (headByte === 0xc3) {\n        // true\n        object = true;\n      } else if (headByte === 0xca) {\n        // float 32\n        object = this.readF32();\n      } else if (headByte === 0xcb) {\n        // float 64\n        object = this.readF64();\n      } else if (headByte === 0xcc) {\n        // uint 8\n        object = this.readU8();\n      } else if (headByte === 0xcd) {\n        // uint 16\n        object = this.readU16();\n      } else if (headByte === 0xce) {\n        // uint 32\n        object = this.readU32();\n      } else if (headByte === 0xcf) {\n        // uint 64\n        object = this.readU64();\n      } else if (headByte === 0xd0) {\n        // int 8\n        object = this.readI8();\n      } else if (headByte === 0xd1) {\n        // int 16\n        object = this.readI16();\n      } else if (headByte === 0xd2) {\n        // int 32\n        object = this.readI32();\n      } else if (headByte === 0xd3) {\n        // int 64\n        object = this.readI64();\n      } else if (headByte === 0xd9) {\n        // str 8\n        const byteLength = this.lookU8();\n        object = this.decodeUtf8String(byteLength, 1);\n      } else if (headByte === 0xda) {\n        // str 16\n        const byteLength = this.lookU16();\n        object = this.decodeUtf8String(byteLength, 2);\n      } else if (headByte === 0xdb) {\n        // str 32\n        const byteLength = this.lookU32();\n        object = this.decodeUtf8String(byteLength, 4);\n      } else if (headByte === 0xdc) {\n        // array 16\n        const size = this.readU16();\n        if (size !== 0) {\n          this.pushArrayState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = [];\n        }\n      } else if (headByte === 0xdd) {\n        // array 32\n        const size = this.readU32();\n        if (size !== 0) {\n          this.pushArrayState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = [];\n        }\n      } else if (headByte === 0xde) {\n        // map 16\n        const size = this.readU16();\n        if (size !== 0) {\n          this.pushMapState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = {};\n        }\n      } else if (headByte === 0xdf) {\n        // map 32\n        const size = this.readU32();\n        if (size !== 0) {\n          this.pushMapState(size);\n          this.complete();\n          continue DECODE;\n        } else {\n          object = {};\n        }\n      } else if (headByte === 0xc4) {\n        // bin 8\n        const size = this.lookU8();\n        object = this.decodeBinary(size, 1);\n      } else if (headByte === 0xc5) {\n        // bin 16\n        const size = this.lookU16();\n        object = this.decodeBinary(size, 2);\n      } else if (headByte === 0xc6) {\n        // bin 32\n        const size = this.lookU32();\n        object = this.decodeBinary(size, 4);\n      } else if (headByte === 0xd4) {\n        // fixext 1\n        object = this.decodeExtension(1, 0);\n      } else if (headByte === 0xd5) {\n        // fixext 2\n        object = this.decodeExtension(2, 0);\n      } else if (headByte === 0xd6) {\n        // fixext 4\n        object = this.decodeExtension(4, 0);\n      } else if (headByte === 0xd7) {\n        // fixext 8\n        object = this.decodeExtension(8, 0);\n      } else if (headByte === 0xd8) {\n        // fixext 16\n        object = this.decodeExtension(16, 0);\n      } else if (headByte === 0xc7) {\n        // ext 8\n        const size = this.lookU8();\n        object = this.decodeExtension(size, 1);\n      } else if (headByte === 0xc8) {\n        // ext 16\n        const size = this.lookU16();\n        object = this.decodeExtension(size, 2);\n      } else if (headByte === 0xc9) {\n        // ext 32\n        const size = this.lookU32();\n        object = this.decodeExtension(size, 4);\n      } else {\n        throw new DecodeError(`Unrecognized type byte: ${prettyByte(headByte)}`);\n      }\n\n      this.complete();\n\n      const stack = this.stack;\n      while (stack.length > 0) {\n        // arrays and maps\n        const state = stack[stack.length - 1]!;\n        if (state.type === State.ARRAY) {\n          state.array[state.position] = object;\n          state.position++;\n          if (state.position === state.size) {\n            stack.pop();\n            object = state.array;\n          } else {\n            continue DECODE;\n          }\n        } else if (state.type === State.MAP_KEY) {\n          if (!isValidMapKeyType(object)) {\n            throw new DecodeError(\"The type of key must be string or number but \" + typeof object);\n          }\n          if (object === \"__proto__\") {\n            throw new DecodeError(\"The key __proto__ is not allowed\");\n          }\n\n          state.key = object;\n          state.type = State.MAP_VALUE;\n          continue DECODE;\n        } else {\n          // it must be `state.type === State.MAP_VALUE` here\n\n          state.map[state.key!] = object;\n          state.readCount++;\n\n          if (state.readCount === state.size) {\n            stack.pop();\n            object = state.map;\n          } else {\n            state.key = null;\n            state.type = State.MAP_KEY;\n            continue DECODE;\n          }\n        }\n      }\n\n      return object;\n    }\n  }\n\n  private readHeadByte(): number {\n    if (this.headByte === HEAD_BYTE_REQUIRED) {\n      this.headByte = this.readU8();\n      // console.log(\"headByte\", prettyByte(this.headByte));\n    }\n\n    return this.headByte;\n  }\n\n  private complete(): void {\n    this.headByte = HEAD_BYTE_REQUIRED;\n  }\n\n  private readArraySize(): number {\n    const headByte = this.readHeadByte();\n\n    switch (headByte) {\n      case 0xdc:\n        return this.readU16();\n      case 0xdd:\n        return this.readU32();\n      default: {\n        if (headByte < 0xa0) {\n          return headByte - 0x90;\n        } else {\n          throw new DecodeError(`Unrecognized array type byte: ${prettyByte(headByte)}`);\n        }\n      }\n    }\n  }\n\n  private pushMapState(size: number) {\n    if (size > this.maxMapLength) {\n      throw new DecodeError(`Max length exceeded: map length (${size}) > maxMapLengthLength (${this.maxMapLength})`);\n    }\n\n    this.stack.push({\n      type: State.MAP_KEY,\n      size,\n      key: null,\n      readCount: 0,\n      map: {},\n    });\n  }\n\n  private pushArrayState(size: number) {\n    if (size > this.maxArrayLength) {\n      throw new DecodeError(`Max length exceeded: array length (${size}) > maxArrayLength (${this.maxArrayLength})`);\n    }\n\n    this.stack.push({\n      type: State.ARRAY,\n      size,\n      array: new Array<unknown>(size),\n      position: 0,\n    });\n  }\n\n  private decodeUtf8String(byteLength: number, headerOffset: number): string {\n    if (byteLength > this.maxStrLength) {\n      throw new DecodeError(\n        `Max length exceeded: UTF-8 byte length (${byteLength}) > maxStrLength (${this.maxStrLength})`,\n      );\n    }\n\n    if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n      throw MORE_DATA;\n    }\n\n    const offset = this.pos + headerOffset;\n    let object: string;\n    if (this.stateIsMapKey() && this.keyDecoder?.canBeCached(byteLength)) {\n      object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n    } else if (byteLength > TEXT_DECODER_THRESHOLD) {\n      object = utf8DecodeTD(this.bytes, offset, byteLength);\n    } else {\n      object = utf8DecodeJs(this.bytes, offset, byteLength);\n    }\n    this.pos += headerOffset + byteLength;\n    return object;\n  }\n\n  private stateIsMapKey(): boolean {\n    if (this.stack.length > 0) {\n      const state = this.stack[this.stack.length - 1]!;\n      return state.type === State.MAP_KEY;\n    }\n    return false;\n  }\n\n  private decodeBinary(byteLength: number, headOffset: number): Uint8Array {\n    if (byteLength > this.maxBinLength) {\n      throw new DecodeError(`Max length exceeded: bin length (${byteLength}) > maxBinLength (${this.maxBinLength})`);\n    }\n\n    if (!this.hasRemaining(byteLength + headOffset)) {\n      throw MORE_DATA;\n    }\n\n    const offset = this.pos + headOffset;\n    const object = this.bytes.subarray(offset, offset + byteLength);\n    this.pos += headOffset + byteLength;\n    return object;\n  }\n\n  private decodeExtension(size: number, headOffset: number): unknown {\n    if (size > this.maxExtLength) {\n      throw new DecodeError(`Max length exceeded: ext length (${size}) > maxExtLength (${this.maxExtLength})`);\n    }\n\n    const extType = this.view.getInt8(this.pos + headOffset);\n    const data = this.decodeBinary(size, headOffset + 1 /* extType */);\n    return this.extensionCodec.decode(data, extType, this.context);\n  }\n\n  private lookU8() {\n    return this.view.getUint8(this.pos);\n  }\n\n  private lookU16() {\n    return this.view.getUint16(this.pos);\n  }\n\n  private lookU32() {\n    return this.view.getUint32(this.pos);\n  }\n\n  private readU8(): number {\n    const value = this.view.getUint8(this.pos);\n    this.pos++;\n    return value;\n  }\n\n  private readI8(): number {\n    const value = this.view.getInt8(this.pos);\n    this.pos++;\n    return value;\n  }\n\n  private readU16(): number {\n    const value = this.view.getUint16(this.pos);\n    this.pos += 2;\n    return value;\n  }\n\n  private readI16(): number {\n    const value = this.view.getInt16(this.pos);\n    this.pos += 2;\n    return value;\n  }\n\n  private readU32(): number {\n    const value = this.view.getUint32(this.pos);\n    this.pos += 4;\n    return value;\n  }\n\n  private readI32(): number {\n    const value = this.view.getInt32(this.pos);\n    this.pos += 4;\n    return value;\n  }\n\n  private readU64(): number {\n    const value = getUint64(this.view, this.pos);\n    this.pos += 8;\n    return value;\n  }\n\n  private readI64(): number {\n    const value = getInt64(this.view, this.pos);\n    this.pos += 8;\n    return value;\n  }\n\n  private readF32() {\n    const value = this.view.getFloat32(this.pos);\n    this.pos += 4;\n    return value;\n  }\n\n  private readF64() {\n    const value = this.view.getFloat64(this.pos);\n    this.pos += 8;\n    return value;\n  }\n}\n","// utility for whatwg streams\n\n// The living standard of whatwg streams says\n// ReadableStream is also AsyncIterable, but\n// as of June 2019, no browser implements it.\n// See https://streams.spec.whatwg.org/ for details\nexport type ReadableStreamLike<T> = AsyncIterable<T> | ReadableStream<T>;\n\nexport function isAsyncIterable<T>(object: ReadableStreamLike<T>): object is AsyncIterable<T> {\n  return (object as any)[Symbol.asyncIterator] != null;\n}\n\nfunction assertNonNull<T>(value: T | null | undefined): asserts value is T {\n  if (value == null) {\n    throw new Error(\"Assertion Failure: value must not be null nor undefined\");\n  }\n}\n\nexport async function* asyncIterableFromStream<T>(stream: ReadableStream<T>): AsyncIterable<T> {\n  const reader = stream.getReader();\n\n  try {\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        return;\n      }\n      assertNonNull(value);\n      yield value;\n    }\n  } finally {\n    reader.releaseLock();\n  }\n}\n\nexport function ensureAsyncIterable<T>(streamLike: ReadableStreamLike<T>): AsyncIterable<T> {\n  if (isAsyncIterable(streamLike)) {\n    return streamLike;\n  } else {\n    return asyncIterableFromStream(streamLike);\n  }\n}\n","import { Decoder } from \"./Decoder\";\nimport type { ExtensionCodecType } from \"./ExtensionCodec\";\nimport type { ContextOf, SplitUndefined } from \"./context\";\n\nexport type DecodeOptions<ContextType = undefined> = Readonly<\n  Partial<{\n    extensionCodec: ExtensionCodecType<ContextType>;\n\n    /**\n     * Maximum string length.\n     *\n     * Defaults to 4_294_967_295 (UINT32_MAX).\n     */\n    maxStrLength: number;\n    /**\n     * Maximum binary length.\n     *\n     * Defaults to 4_294_967_295 (UINT32_MAX).\n     */\n    maxBinLength: number;\n    /**\n     * Maximum array length.\n     *\n     * Defaults to 4_294_967_295 (UINT32_MAX).\n     */\n    maxArrayLength: number;\n    /**\n     * Maximum map length.\n     *\n     * Defaults to 4_294_967_295 (UINT32_MAX).\n     */\n    maxMapLength: number;\n    /**\n     * Maximum extension length.\n     *\n     * Defaults to 4_294_967_295 (UINT32_MAX).\n     */\n    maxExtLength: number;\n  }>\n> &\n  ContextOf<ContextType>;\n\nexport const defaultDecodeOptions: DecodeOptions = {};\n\n/**\n * It decodes a single MessagePack object in a buffer.\n *\n * This is a synchronous decoding function.\n * See other variants for asynchronous decoding: {@link decodeAsync()}, {@link decodeStream()}, or {@link decodeArrayStream()}.\n */\nexport function decode<ContextType = undefined>(\n  buffer: ArrayLike<number> | BufferSource,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): unknown {\n  const decoder = new Decoder(\n    options.extensionCodec,\n    (options as typeof options & { context: any }).context,\n    options.maxStrLength,\n    options.maxBinLength,\n    options.maxArrayLength,\n    options.maxMapLength,\n    options.maxExtLength,\n  );\n  return decoder.decode(buffer);\n}\n\n/**\n * It decodes multiple MessagePack objects in a buffer.\n * This is corresponding to {@link decodeMultiStream()}.\n */\nexport function decodeMulti<ContextType = undefined>(\n  buffer: ArrayLike<number> | BufferSource,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): Generator<unknown, void, unknown> {\n  const decoder = new Decoder(\n    options.extensionCodec,\n    (options as typeof options & { context: any }).context,\n    options.maxStrLength,\n    options.maxBinLength,\n    options.maxArrayLength,\n    options.maxMapLength,\n    options.maxExtLength,\n  );\n  return decoder.decodeMulti(buffer);\n}\n","import { Decoder } from \"./Decoder\";\nimport { ensureAsyncIterable } from \"./utils/stream\";\nimport { defaultDecodeOptions } from \"./decode\";\nimport type { ReadableStreamLike } from \"./utils/stream\";\nimport type { DecodeOptions } from \"./decode\";\nimport type { SplitUndefined } from \"./context\";\n\nexport async function decodeAsync<ContextType>(\n  streamLike: ReadableStreamLike<ArrayLike<number> | BufferSource>,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): Promise<unknown> {\n  const stream = ensureAsyncIterable(streamLike);\n\n  const decoder = new Decoder(\n    options.extensionCodec,\n    (options as typeof options & { context: any }).context,\n    options.maxStrLength,\n    options.maxBinLength,\n    options.maxArrayLength,\n    options.maxMapLength,\n    options.maxExtLength,\n  );\n  return decoder.decodeAsync(stream);\n}\n\nexport function decodeArrayStream<ContextType>(\n  streamLike: ReadableStreamLike<ArrayLike<number> | BufferSource>,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): AsyncGenerator<unknown, void, unknown> {\n  const stream = ensureAsyncIterable(streamLike);\n\n  const decoder = new Decoder(\n    options.extensionCodec,\n    (options as typeof options & { context: any }).context,\n    options.maxStrLength,\n    options.maxBinLength,\n    options.maxArrayLength,\n    options.maxMapLength,\n    options.maxExtLength,\n  );\n\n  return decoder.decodeArrayStream(stream);\n}\n\nexport function decodeMultiStream<ContextType>(\n  streamLike: ReadableStreamLike<ArrayLike<number> | BufferSource>,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): AsyncGenerator<unknown, void, unknown> {\n  const stream = ensureAsyncIterable(streamLike);\n\n  const decoder = new Decoder(\n    options.extensionCodec,\n    (options as typeof options & { context: any }).context,\n    options.maxStrLength,\n    options.maxBinLength,\n    options.maxArrayLength,\n    options.maxMapLength,\n    options.maxExtLength,\n  );\n\n  return decoder.decodeStream(stream);\n}\n\n/**\n * @deprecated Use {@link decodeMultiStream()} instead.\n */\nexport function decodeStream<ContextType>(\n  streamLike: ReadableStreamLike<ArrayLike<number> | BufferSource>,\n  options: DecodeOptions<SplitUndefined<ContextType>> = defaultDecodeOptions as any,\n): AsyncGenerator<unknown, void, unknown> {\n  return decodeMultiStream(streamLike, options);\n}\n","/*\n *   appUtil.js -- this is where we define constants and general utility functions\n *   that don't fit anywhere else.\n *\n *   importing it has no side-effects\n */\nexport function padNum(num: number, size: number): string {\n  let s = String(num)\n  while (s.length < (size || 2)) {\n    s = \"0\" + s\n  }\n  return s\n}\n\n// return a \"HH:MM:SS\" string given number of seconds\nexport function HHMMSS(secs: number): string {\n  let totalSeconds = secs\n\n  const hours = padNum(Math.floor(totalSeconds / 3600), 2)\n  totalSeconds %= 3600\n  const minutes = padNum(Math.floor(totalSeconds / 60), 2)\n  const seconds = padNum(Math.round(totalSeconds % 60), 2)\n\n  return `${hours}:${minutes}:${seconds}`\n}\n\n// return a \"DD:HH:MM\" string given number of seconds\nexport function DDHHMM(sec: number): string {\n  if (!sec || sec <= 0) {\n    return \"??\"\n  }\n  const days = Math.floor(sec / 86400)\n  sec -= days * 86400\n\n  // calculate (and subtract) whole hours\n  const hours = Math.floor(sec / 3600) % 24\n  sec -= hours * 3600\n\n  // calculate (and subtract) whole minutes\n  const minutes = Math.floor(sec / 60) % 60\n  sec -= minutes * 60\n\n  return `${padNum(days, 2)}:${padNum(hours, 2)}:${padNum(minutes, 2)}`\n}\n\n// return an image tag string, given an image url\nexport function img(url: string, w = 20, h = 20, alt = \"\"): string {\n  return `<img loading=lazy src='${url}' width=${w}px height=${h}px alt=\"${alt}\">`\n}\n\n// return an HTML href tag from a url and text\nexport function href(url: string, text: string): string {\n  return `<a href='${url}' target='_blank'>${text}</a>`\n}\n\n// define the do-nothing function, noop\nexport function noop(): void {\n  return\n}\n\n/**\n * Binary Search returns the index of the target value in a sorted array-like\n *    data structure.\n */\nexport function binarySearch(\n  get: (i: number) => unknown,\n  target: unknown,\n  start: number,\n  end: number,\n  compare?: (x, y) => number\n): number {\n  if (start > end) {\n    return false\n  }\n\n  const mid = Math.floor((start + end) / 2)\n\n  if (compare(get(mid), target) === 0) {\n    return mid\n  }\n\n  if (compare(get(mid), target) > 0) {\n    return binarySearch(get, target, start, mid - 1)\n  } else {\n    return binarySearch(get, target, mid + 1, end)\n  }\n}\n\n/**\n * Histogram for analysis\n * @example\n *  const bins = histogram([1,1,2,2,3,4,4,4], [2, 3])\n *\n * Then bins == [2, 3, 3]\n *\n */\nexport function histogram(points: Iterable<number>, bins: number[]): number[] {\n  const binCounts = new Array(bins.length + 1).fill(0)\n  const last = bins.length - 1\n  for (const p of points) {\n    if (p < bins[0]) {\n      binCounts[0]++\n    } else if (p > bins[last]) {\n      binCounts[bins.length]++\n    } else {\n      for (let i = 0; i < binCounts.length; i++) {\n        if (bins[i] <= p && p <= bins[i + 1]) {\n          binCounts[i]++\n          break\n        }\n      }\n    }\n  }\n  // console.log(bins)\n  return binCounts\n}\n\n/**\n * Filters outliers from an Array using standard IQR method. Creates a new Array.\n * adapted from https://gist.github.com/ogun/f19dc055e6b84d57e8186cbc9eaa8e45 (Kemal Ogun Isik)\n */\ntype quartObj = { q1: number; q3: number; iqr: number }\nexport function quartiles(someArray: Array<number>): quartObj {\n  if (someArray.length < 4) return\n\n  const values = someArray.slice().sort((a, b) => a - b)\n  const n = values.length\n  const n_4 = n / 4\n  const evenQuarters = n_4 % 1 === 0\n\n  const q1 = evenQuarters\n    ? (1 / 2) * (values[n_4] + values[n_4 + 1])\n    : values[Math.floor(n_4 + 1)]\n\n  const q3 = evenQuarters\n    ? (1 / 2) * (values[n * (3 / 4)] + values[n * (3 / 4) + 1])\n    : values[Math.ceil(n * (3 / 4) + 1)]\n\n  return { q1, q3, iqr: q3 - q1 }\n}\n\n/*\n * Some functions that make de-janking easier via async code\n */\nexport function sleep(t: number): Promise<number> {\n  return new Promise((resolve) => window.setTimeout(resolve, t))\n}\n\nexport function queueTask(cb: (x: unknown) => unknown): void {\n  window.setTimeout(cb, 0)\n}\n\nexport function nextTask(): Promise<void> {\n  return new Promise((resolve) => queueTask(resolve))\n}\n\nexport function nextAnimationFrame(): Promise<number> {\n  let resolve = null\n  const promise: Promise<number> = new Promise((r) => (resolve = r))\n  window.requestAnimationFrame(resolve)\n  return promise\n}\n\n/*\n *  An object for general rectangular bounds\n */\ntype BoundsData = [number, number, number, number]\ntype RectObj = { x: number; y: number; w: number; h: number }\nexport class Bounds {\n  _bounds: BoundsData\n\n  constructor() {\n    this._bounds = [NaN, NaN, NaN, NaN]\n    // [xmin, ymin, xmax, ymax]\n  }\n\n  reset(): Bounds {\n    this._bounds.fill(NaN)\n    return this\n  }\n\n  isEmpty(): boolean {\n    return isNaN(this._bounds[0])\n  }\n\n  update(x: number, y: number): Bounds {\n    if (this.isEmpty()) {\n      this._bounds[0] = this._bounds[2] = x\n      this._bounds[1] = this._bounds[3] = y\n      return\n    }\n    if (x < this._bounds[0]) this._bounds[0] = x\n    if (y < this._bounds[1]) this._bounds[1] = y\n    if (x > this._bounds[2]) this._bounds[2] = x\n    if (y > this._bounds[3]) this._bounds[3] = y\n    return this\n  }\n\n  updateBounds(otherBoundsObj: Bounds): Bounds {\n    const [x1, y1, x2, y2] = otherBoundsObj._bounds\n    this.update(x1, y1)\n    this.update(x2, y2)\n    return this\n  }\n\n  contains(x: number, y: number): boolean {\n    const [xmin, ymin, xmax, ymax] = this._bounds\n    return xmin <= x && x <= xmax && ymin <= y && y <= ymax\n  }\n\n  containsBounds(otherBoundsObj: Bounds): boolean {\n    const [x1, y1, x2, y2] = otherBoundsObj._bounds\n    return this.contains(x1, y1) && this.contains(x2, y2)\n  }\n\n  overlaps(otherBoundsObj: Bounds): boolean {\n    const [xmin, ymin, xmax, ymax] = this._bounds\n    const [x1, y1, x2, y2] = otherBoundsObj._bounds\n    return x2 >= xmin && x1 <= xmax && y2 >= ymin && y1 <= ymax\n  }\n\n  /**\n   * Euclidean distance between two bounds\n   */\n  dist(otherBoundsObj: Bounds): number {\n    const b = this._bounds\n    const o = otherBoundsObj._bounds\n    return Math.sqrt(\n      (b[0] - o[0]) ** 2 +\n        (b[1] - o[1]) ** 2 +\n        (b[2] - o[2]) ** 2 +\n        (b[3] - o[3]) ** 2\n    )\n  }\n\n  copyTo(otherBoundsObj: Bounds): void {\n    const b = this._bounds\n    const o = otherBoundsObj._bounds\n    o[0] = b[0]\n    o[1] = b[1]\n    o[2] = b[2]\n    o[3] = b[3]\n  }\n\n  get rect(): RectObj {\n    const [xmin, ymin, xmax, ymax] = this._bounds\n    return { x: xmin, y: ymin, w: xmax - xmin, h: ymax - ymin }\n  }\n\n  get data(): BoundsData {\n    return this._bounds\n  }\n\n  set data(data: BoundsData) {\n    this._bounds = data\n  }\n}\n","/* Here is where we define an API for a custom set of icons from icomoon */\n\nexport function icon(name: string, cls = \"\"): string {\n  return `<i class=\"hf-${name} ${cls}\"></i>`\n}\n","/*\n * Strava related stuff\n */\n\n/* Custom font-font set from Icomoon */\nimport { icon } from \"./Icons\"\n\n/**\n * @param  {(String|Number)} id - A Strava activity id\n * @return {String} The Strava URL for that activity\n */\nexport function activityURL(id) {\n  return `https://www.strava.com/activities/${id}`\n}\n\n/**\n * @param  {(String|Number)} id - Strava user-id\n * @return {String} The Strava URL for that user\n */\nexport function athleteURL(id) {\n  return `https://www.strava.com/athletes/${id}`\n}\n\n/**\n * This is a list of tuples specifying properties of the rendered objects,\n * such as path color, speed/pace in description.  others can be added.\n * @see  https://developers.strava.com/docs/reference/#api-models-ActivityType\n *\n * @type {Object}\n */\nconst _specs = {\n  AlpineSki: [\"speed\", \"#800080\", icon(\"skiing\")],\n  BackcountrySki: [\"speed\", \"#800080\", icon(\"xc-ski\")],\n  Canoeing: [\"speed\", \"#fa8080\", icon(\"canoe\")],\n  Crossfit: [null, null, icon(\"crossfit\")],\n  EBikeRide: [\"speed\", \"#0000cd\", icon(\"motorcycle\")], // mediumblue\n  Elliptical: [null, null],\n  Golf: [null, null, icon(\"golf\")],\n  Handcycle: [\"speed\", \"#2b60de\", icon(\"handbike\")],\n  Hike: [\"pace\", \"#ff1493\", icon(\"hiking\")], // deeppink\n  IceSkate: [\"speed\", \"#663399\", icon(\"skating\")], // rebeccapurple\n  InlineSkate: [\"speed\", \"#8a2be2\", icon(\"inline-skating\")], // blueviolet\n  Kayaking: [\"speed\", \"#ffa500\", icon(\"kayak\")], // orange\n  Kitesurf: [\"speed\", \"#00ff00\", icon(\"kitesurf\")],\n  NordicSki: [\"speed\", \"#800080\", icon(\"skiing-nordic\")], // purple\n  Ride: [\"speed\", \"#2b60de\", icon(\"bicycle\")], // ocean blue\n  RockClimbing: [null, \"#4b0082\", icon(\"climbing\")], // indigo\n  RollerSki: [\"speed\", \"#800080\", icon(\"roller-ski\")], // purple\n  Rowing: [\"speed\", \"#fa8072\", icon(\"rowing\")], // salmon\n  Run: [\"pace\", \"#ff0000\", icon(\"running\")], // red\n  Sail: [\"speed\", \"#8a2be2\", icon(\"sailboat\")],\n  Skateboard: [\"speed\", \"#800080\", icon(\"skateboarding\")],\n  Snowboard: [\"speed\", \"#00ff00\", icon(\"snowboarding\")], // lime\n  Snowshoe: [\"pace\", \"#800080\", icon(\"snowshoes\")], // purple\n  Soccer: [\"pace\", \"#8a2be2\", icon(\"soccer\")],\n  StairStepper: [\"pace\", null, icon(\"stairs\")],\n  StandUpPaddling: [\"speed\", \"#800080\", icon(\"sup-paddle\")],\n  Surfing: [\"speed\", \"#006400\", icon(\"surf\")], // darkgreen\n  Swim: [\"speed\", \"#00ff7f\", icon(\"swimming\")], // springgreen\n  Velomobile: [\"speed\", null, null],\n  VirtualRide: [\"speed\", \"#1e90ff\", icon(\"spinning\")], // dodgerblue\n  VirtualRun: [\"pace\", null, icon(\"treadmill\")],\n  Walk: [\"pace\", \"#ff00ff\", icon(\"walking\")], // fuchsia\n  WeightTraining: [null, null, icon(\"weights\")],\n  Wheelchair: [\"speed\", \"#2b60de\", icon(\"wheelchair\")],\n  Windsurf: [\"speed\", \"#4b0082\", icon(\"windsurf\")],\n  Workout: [null, null, \"#4b0082\", icon(\"activity\")],\n  Yoga: [null, null, icon(\"meditate\")],\n  undefined: [\"speed\", null, icon(\"activity\")],\n}\n\nexport function activity_icon(atype) {\n  return _specs[atype][2] || atype\n}\n\nexport function activity_pathcolor(atype) {\n  return _specs[atype][1] || atype\n}\n\nexport const ATYPE = {\n  /**\n   * @return {Iterable.<String>} An Iterable of names of the\n   *                                Strava activity types that we support\n   */\n  types: Object.keys(_specs),\n\n  index: (() => {\n    const index = {}\n    let i = 0\n    for (const type of Object.keys(_specs)) {\n      index[type] = i++\n    }\n    return index\n  })(),\n\n  /**\n   * @param  {String} type The activity type (one of the keys of {@link _specs})\n   * @return {String} The color code for that activity type\n   */\n  pathColor: function (type) {\n    const spec = _specs[type] || _specs[type.toLowerCase()] || _specs[undefined]\n    return spec[1]\n  },\n\n  /**\n   * @typedef {atypeSpec}\n   * @property {(String|null)} vtype \"speed\" or \"pace\" (or null)\n   * @property {String} pathColor  Path color (or null)\n   * @property {String} [name] Alternate name for this activity type\n   */\n\n  /**\n   * [specs description]\n   * @param  {String} type The activity type (one of {@link _specs})\n   * @return {atypeSpec} An object with specs for this activity type\n   */\n  specs: function (type) {\n    const spec = _specs[type] || _specs[type.toLowerCase()] || _specs[undefined]\n\n    return { vtype: spec[0], pathColor: spec[1], name: spec[2] || type }\n  },\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"liIPv\")).toString();","/*\n * This is the script for the heatflask activity-list view\n * activities-page.html.\n */\n\nimport { decodeMultiStream } from \"@msgpack/msgpack\"\nimport { href, img, HHMMSS, sleep } from \"~/src/js/appUtil\"\nimport { icon } from \"~/src/js/Icons\"\nimport { activity_icon, activityURL } from \"~/src/js/Strava\"\n// import { JSTable } from \"../../js/jstable\"\n\nconst BASE_URL = \"/\"\nconst strava_button_url = new URL(\n  \"~/src/images/strava_button.png\",\n  import.meta.url\n)\n\nconst status_msg_el = document.getElementById(\"status_msg\")\nconst count_msg_el = document.getElementById(\"count\")\nconst table_el = document.getElementById(\"activity_list\")\n\nconst argstr = document.getElementById(\"runtime_json\").innerText\nconst args = JSON.parse(argstr)\nconst atypes = args[\"atypes\"]\nconst MULTI = !args[\"query_obj\"][\"user_id\"]\n\nfunction user_thumbnail(id, img_url) {\n  if (!(id && img_url)) return \"\"\n  const avatar = img(img_url, 40, 40, id)\n  return href(`/${id}`, avatar)\n}\n\nconst STRAVA_BUTTON = img(strava_button_url)\nconst store = window.localStorage\nconst METRIC = store.getItem(\"units\") == \"metric\"\nconst DIST_SCALE = METRIC ? 1 / 1000 : 1 / 1609.34\nconst DIST_LABEL = METRIC ? \"km\" : \"mi\"\nconst ELEV_SCALE = METRIC ? 1 : 3.28084\nconst ELEV_LABEL = METRIC ? \"m\" : \"ft\"\n\n// This spec should match that in Index.py\nconst ACTIVITY_ID = \"_id\",\n  USER_ID = \"U\",\n  UTC_START_TIME = \"s\",\n  UTC_LOCAL_OFFSET = \"o\",\n  DISTANCE_METERS = \"D\",\n  TIME_SECONDS = \"T\",\n  ELEVATION_GAIN = \"+\",\n  FLAG_PRIVATE = \"p\",\n  ACTIVITY_NAME = \"N\",\n  ACTIVITY_TYPE = \"t\",\n  VISIBILITY = \"v\"\n\nfunction makeHeaderRow() {\n  const h = [\n    icon(\"calendar1\") + \" \" + icon(\"link\"), // heatflask link\n    icon(\"external\"), // strava link\n    icon(\"activity\"), // atype\n    icon(\"user-secret\"), // private\n    icon(\"stopwatch\"), // elapsed\n    `${icon(\"road1\")} (${DIST_LABEL})`, // distance\n    `${icon(\"rocket\")} (${ELEV_LABEL})`,\n    icon(\"pencil\"), // title\n  ]\n\n  if (MULTI) {\n    return [icon(\"user\")].concat(h)\n  } else {\n    return h\n  }\n}\n\nconst priv_icon = icon(\"eye-blocked\")\nconst pub_icon = icon(\"eye\")\n\nasync function main() {\n  count_msg_el.classList.add(\"spinner\")\n  const response = await fetch(args[\"query_url\"], {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/msgpack\",\n      \"Content-Type\": \"application/msgpack\",\n    },\n    body: JSON.stringify(args[\"query_obj\"]),\n  })\n\n  const data = []\n  let count = 0\n  let n_total\n  const errors = []\n\n  for await (const obj of decodeMultiStream(response.body)) {\n    if (\"msg\" in obj) {\n      status_msg_el.innerText = obj[\"msg\"]\n    } else if (\"count\" in obj) {\n      n_total = obj[\"count\"]\n      data[n_total - 1] = undefined\n      data.fill(count, n_total, undefined)\n      status_msg_el.innerText = \"Fetching activities...\"\n    } else if (\"error\" in obj) {\n      errors.push(obj[\"error\"])\n    } else {\n      data[count] = makeRow(obj)\n      count_msg_el.innerText = count++\n    }\n  }\n\n  console.time(\"buildTable\")\n  buildTableWithInnerHTML(table_el, data)\n  console.timeEnd(\"buildTable\")\n  status_msg_el.innerText = \"\"\n  count_msg_el.innerText = \"\"\n\n  // const myTable = new JSTable(table_el, {\n  //   sortable: true,\n  //   searchable: true,\n  //   perPage: 16,\n  // })\n  await sleep(0.2)\n  count_msg_el.classList.remove(\"spinner\")\n}\n\nfunction makeRow(A) {\n  const aid = A[ACTIVITY_ID],\n    heatflask_link = `${BASE_URL}?id=${aid}`,\n    strava_link = href(`${activityURL(aid)}`, STRAVA_BUTTON),\n    date = new Date(\n      (A[UTC_START_TIME] + A[UTC_LOCAL_OFFSET]) * 1000\n    ).toLocaleString(),\n    dist = (A[DISTANCE_METERS] * DIST_SCALE).toFixed(2),\n    elapsed = HHMMSS(A[TIME_SECONDS]),\n    elev_gain = (A[ELEVATION_GAIN] * ELEV_SCALE).toFixed(2)\n\n  const atype = atypes[A[ACTIVITY_TYPE]] || `${A[ACTIVITY_TYPE]}*`\n\n  const picon = A[FLAG_PRIVATE] ? priv_icon : pub_icon\n\n  if (MULTI) {\n    return [\n      user_thumbnail(A[USER_ID], A[\"profile\"]),\n      href(heatflask_link, date),\n      strava_link,\n      activity_icon(atype),\n      picon,\n      elapsed,\n      dist,\n      elev_gain,\n      A[ACTIVITY_NAME],\n    ]\n  } else {\n    return [\n      href(heatflask_link, date),\n      strava_link,\n      activity_icon(atype),\n      picon,\n      elapsed,\n      dist,\n      elev_gain,\n      A[ACTIVITY_NAME],\n    ]\n  }\n}\n\nfunction buildTableWithInnerHTML(el, data) {\n  const headers = makeHeaderRow().join(\"</th><th>\")\n  const thead_str = `<thead><th>${headers}</th></thead>\\n`\n\n  if (data.length) {\n    const row_strs = data.map((rowArr) => {\n      const cells = rowArr.join(\"</td><td>\")\n      return `<tr><td>${cells}</td></tr>`\n    })\n    const rows_str = row_strs.join(\"\\n\")\n    const tbody_str = `<tbody>\\n${rows_str}\\n</tbody>`\n\n    el.innerHTML = thead_str + tbody_str\n  } else {\n    el.innerHTML = thead_str + \"<tr>Sorry no data &#128577</tr>\"\n  }\n}\n\nfunction buildTableWithElements(el, data) {\n  const table = document.getElementById(\"activity_list\")\n  const thead = document.createElement(\"thead\")\n  const header_row = document.createElement(\"tr\")\n  for (const h in makeHeaderRow()) {\n    const th = document.createElement(\"th\")\n    th.innerText = h\n    header_row.appendChild(th)\n  }\n  thead.appendChild(header_row)\n\n  const n_cols = header_data.length\n  const tbody = document.createElement(\"tbody\")\n  for (let i = 0; i < data.length; i++) {\n    const tr = document.createElement(\"tr\")\n    const rowData = makeRow(data[i])\n    for (let j = 0; j < n_cols; j++) {\n      const td = document.createElement(\"td\")\n      td.innerText = rowData[j]\n      tr.appendChild(td)\n    }\n    tbody.appendChild(tr)\n  }\n  table.appendChild(thead)\n  table.appendChild(tbody)\n}\n\n// Run the main async function\n;(async () => {\n  try {\n    await main()\n  } catch (e) {\n    console.log(\"oops. \", e)\n  }\n})()\n"],"names":["$f41492d63a8c98e3$export$6503ec6e8aabbaf","$f41492d63a8c98e3$export$f7ad0328861e2f03","$f41492d63a8c98e3$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$64ada40aca309a9e$export$78406e843f5312da","byte","concat","Math","abs","toString","padStart","$ce35287eb562b37d$export$bcbeb236456bc779","type","data","this","$b277478971fceaaf$export$ef3eed12d06c0285","_super","message","_this","call","proto","create","prototype","setPrototypeOf","defineProperty","configurable","enumerable","value","name","$b277478971fceaaf$var$__extends","$258b0d8f1a685b40$export$69825c7adcc820c6","view","offset","getInt32","getUint32","$cd7cbea52c754316$export$2fd05b828dd81159","_a","sec","nsec","rv","Uint8Array","DataView","buffer","setUint32","secHigh","secLow","high","floor","low","$258b0d8f1a685b40$export$8532a5209571c04a","$d40f2b251d8c6b0a$var$cachedSetTimeout","$d40f2b251d8c6b0a$var$cachedClearTimeout","$cd7cbea52c754316$export$8654479533463da1","encode","object","msec","nsecInSec","Date","getTime","decode","timeSpec","byteOffset","byteLength","nsec30AndSecHigh2","$b277478971fceaaf$exports","DecodeError","$cd7cbea52c754316$export$abfc8800a5159711","$29a1cec2543fc20b$export$12677a794dbd89d7","builtInEncoders","builtInDecoders","encoders","decoders","index","tryToEncode","context","encodeExt","decodeExt","defaultCodec","$d40f2b251d8c6b0a$var$process","$d40f2b251d8c6b0a$exports","$d40f2b251d8c6b0a$var$defaultSetTimout","$d40f2b251d8c6b0a$var$defaultClearTimeout","$d40f2b251d8c6b0a$var$runTimeout","fun","setTimeout","e","clearTimeout","e1","$d40f2b251d8c6b0a$var$currentQueue","$d40f2b251d8c6b0a$var$queue","$d40f2b251d8c6b0a$var$draining","$d40f2b251d8c6b0a$var$queueIndex","$d40f2b251d8c6b0a$var$cleanUpNextTick","$d40f2b251d8c6b0a$var$drainQueue","timeout","len","run","marker","$d40f2b251d8c6b0a$var$runClearTimeout","$d40f2b251d8c6b0a$var$Item","array","$d40f2b251d8c6b0a$var$noop","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","$0b678e64e1f97081$var$TEXT_ENCODING_AVAILABLE","$0b678e64e1f97081$var$_a","TextEncoder","TextDecoder","$0b678e64e1f97081$var$sharedTextEncoder","undefined","$0b678e64e1f97081$var$_b","encodeInto","$0b678e64e1f97081$export$551117984c2adf4f","bytes","inputOffset","end","units","result","byte1","byte2","byte3","unit","String","fromCharCode","$0b678e64e1f97081$var$sharedTextDecoder","$0b678e64e1f97081$export$d866281c5a66d1ef","$0b678e64e1f97081$var$_c","$25c3c3b46bf50d2c$export$f8d669c2a17882f2","ArrayBuffer","isView","from","$7c848e28e4afe777$export$529b830450faf29c","maxKeyLength","maxLengthPerKey","hit","miss","caches","canBeCached","find","FIND_CHUNK","_i","records_1","record","recordBytes","j","str","store","records","random","cachedValue","slicedCopyOfBytes","slice","$2d413eebcea04cb4$var$EMPTY_VIEW","$2d413eebcea04cb4$var$EMPTY_BYTES","$2d413eebcea04cb4$export$449c37eaf7093493","getInt8","constructor","$2d413eebcea04cb4$var$MORE_DATA","$2d413eebcea04cb4$var$sharedCachedKeyDecoder","$2d413eebcea04cb4$export$f9de6ca0bc043724","extensionCodec","maxStrLength","maxBinLength","maxArrayLength","maxMapLength","maxExtLength","keyDecoder","totalPos","pos","headByte","stack","reinitializeState","setBuffer","bufferView","$25c3c3b46bf50d2c$export$7277868462c1ba02","appendBuffer","hasRemaining","remainingData","subarray","newData","newBuffer","set","size","createExtraByteError","posToShow","RangeError","doDecodeSync","decodeMulti","sent","decodeAsync","stream","decoded","stream_1","$2d413eebcea04cb4$var$__asyncValues","stream_1_1","_b","decodeArrayStream","decodeMultiAsync","decodeStream","isArray","isArrayHeaderRequired","arrayItemsLeft","stream_2","stream_2_1","readArraySize","complete","$2d413eebcea04cb4$var$__await","e_2","DECODE","readHeadByte","pushMapState","pushArrayState","decodeUtf8String","readF32","readF64","readU8","readU16","readU32","readU64","readI8","readI16","readI32","readI64","lookU8","lookU16","lookU32","decodeBinary","decodeExtension","state","position","pop","keyType","key","map","readCount","headerOffset","stateIsMapKey","stringBytes","$0b678e64e1f97081$export$6ed79e41309992dc","headOffset","extType","getUint8","getUint16","getInt16","getFloat32","getFloat64","$6c950c1dcdf28f3a$var$assertNonNull","$6c950c1dcdf28f3a$export$bf99ef56e8bd104","streamLike","Symbol","asyncIterator","reader","getReader","$6c950c1dcdf28f3a$var$__await","read","done","releaseLock","$6c950c1dcdf28f3a$export$f62cf0e66867a58e","$1940cc7f02e0e8bd$export$ca6ec972f712a9eb","$e4d3598dc95dffb0$export$bf87d8a088c760fb","options","$6c950c1dcdf28f3a$exports","ensureAsyncIterable","$2d413eebcea04cb4$exports","Decoder","$bc5bae31cbce43d7$export$678e9b117e35b180","num","s","$bc5bae31cbce43d7$export$463b44d9bf3628be","url","w","h","alt","$bc5bae31cbce43d7$export$8f51af5840e0602a","text","$8a49238c792f3d7d$export$1ca1ec8b29a4ce27","cls","$c9b7533bf61c2818$var$_specs","AlpineSki","BackcountrySki","Canoeing","Crossfit","EBikeRide","Elliptical","Golf","Handcycle","Hike","IceSkate","InlineSkate","Kayaking","Kitesurf","NordicSki","Ride","RockClimbing","RollerSki","Rowing","Run","Sail","Skateboard","Snowboard","Snowshoe","Soccer","StairStepper","StandUpPaddling","Surfing","Swim","Velomobile","VirtualRide","VirtualRun","Walk","WeightTraining","Wheelchair","Windsurf","Workout","Yoga","$c9b7533bf61c2818$export$c7ddd031d1ddb10","atype","$748ddec71c72f2a1$exports","URL","resolve","import","meta","$30ac435ad9371dfd$var$strava_button_url","$30ac435ad9371dfd$var$status_msg_el","document","getElementById","$30ac435ad9371dfd$var$count_msg_el","$30ac435ad9371dfd$var$table_el","$30ac435ad9371dfd$var$argstr","innerText","$30ac435ad9371dfd$var$args","$30ac435ad9371dfd$var$atypes","$30ac435ad9371dfd$var$MULTI","$30ac435ad9371dfd$var$user_thumbnail","img_url","$30ac435ad9371dfd$var$STRAVA_BUTTON","$30ac435ad9371dfd$var$METRIC","window","localStorage","getItem","$30ac435ad9371dfd$var$DIST_SCALE","$30ac435ad9371dfd$var$DIST_LABEL","$30ac435ad9371dfd$var$ELEV_SCALE","$30ac435ad9371dfd$var$ELEV_LABEL","$30ac435ad9371dfd$var$makeHeaderRow","$30ac435ad9371dfd$var$priv_icon","$30ac435ad9371dfd$var$pub_icon","async","$30ac435ad9371dfd$var$main","classList","add","response","fetch","method","headers","Accept","body","stringify","n_total","count","errors","obj","$e4d3598dc95dffb0$exports","decodeMultiStream","fill","$30ac435ad9371dfd$var$makeRow","t","console","time","el","thead_str","join","tbody_str","rowArr","innerHTML","$30ac435ad9371dfd$var$buildTableWithInnerHTML","timeEnd","Promise","remove","A","aid","heatflask_link","strava_link","date","toLocaleString","dist","toFixed","elapsed","secs","totalSeconds","hours","round","$bc5bae31cbce43d7$export$5165503fb779fbf7","elev_gain","picon","log"],"version":3,"file":"activities-page.b165af2e.js.map"}